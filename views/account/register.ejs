<!-- ***************************************
 * views/account/register.ejs
 * Registration page with server-side validation
 * *************************************** -->
<h1><%= title %></h1>

<!-- Flash message (renders only if something was sent) -->
<%- messages() %>

<section class="card auth-card">
  <h2>New Account</h2>
  <div class="auth-card-wrapper">
    <!-- *******************************
    Display server-side validation errors
    ******************************* -->
    <% if (errors) { %>
      <ul class="notice">
        <% errors.array().forEach(error => { %>
          <li><%= error.msg %></li>
        <% }) %>
      </ul>
    <% } %>

    <!-- *******************************
    Registration Form
    ******************************* -->
    <form id="registerForm" class="form auth-form" action="/account/register" method="post">
      
      <!-- First Name -->
      <div class="form-row">
        <label for="account_firstname">First Name:</label>
        <input 
          type="text"
          id="account_firstname"     
          name="account_firstname"   
          placeholder="Enter your first name"
          value="<%= locals.account_firstname %>"
          required
        >
      </div>

      <!-- Last Name -->
      <div class="form-row">
        <label for="account_lastname">Last Name:</label>
        <input 
          type="text"
          id="account_lastname"      
          name="account_lastname"    
          placeholder="Enter your last name"
          value="<%= locals.account_lastname %>"
          required
        >
      </div>

      <!-- Email -->
      <div class="form-row">
        <label for="account_email">Email Address:</label>
        <input
          type="email"
          id="account_email"
          name="account_email"
          placeholder="youremail@example.com"
          autocomplete="username"
          value="<%= locals.account_email %>"
          required
        >
      </div>
      
      <!-- Password -->
      <div class="form-row">
        <label for="account_password">Password:</label>
        <input
          type="password"
          id="account_password"
          name="account_password"
          autocomplete="new-password"
          placeholder="At least 12 characters"
          pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
          title="Must be at least 12 characters, include 1 capital letter, 1 number, and 1 special character"
          required
        >
      </div>

      <button type="submit" class="btn primary">REGISTER</button>
    </form>

    <div class="create-account register">
      <p>Password must</p>
      <ul>
        <li>Be at least 12 characters long</li>
        <li>Contain at least 1 capital letter</li>
        <li>Contain at least 1 number</li>
        <li>Contain at least 1 special character</li>
      </ul>
    </div>
  </div>
</section>