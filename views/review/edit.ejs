<% /* =============================================
  views/review/edit.ejs
  Module 07 - Edit Existing Review | Final Project
  ============================================= */ %>
<h1><%= title %></h1>

<!-- Flash messages -->
<%- messages() %>
<!-- Server-side validation errors -->
<% if (errors && errors.length > 0) { %>
  <ul class="notice">
    <% errors.forEach(error => { %>
      <li><%= error.msg %></li>
    <% }) %>
  </ul>
<% } %>

<section class="card auth-card review-form-card">
  <h2>All Fields Are Required</h2>
  <div class="auth-card-wrapper">
    <form
      id="editReviewForm"
      class="form auth-form"
      action="/reviews/update"
      method="post"
    >
      <!-- Hidden primary key: the review we are editing -->
      <input type="hidden" name="review_id" id="review_id" value="<%= review_id %>">

      <!-- Review Date -->
      <div class="form-row">
        <label for="review_date">Review Date</label>
        <input
          id="review_date"
          name="review_date"
          type="text"
          value="<%= review_date %>"
          readonly
        >
      </div>

      <!-- Review Text -->
      <div class="form-row">
        <label for="review_text">Review Text</label>
        <textarea
          id="review_text"
          name="review_text"
          rows="5"
          minlength="10"
          autofocus
          required
          placeholder="Please enter your review (minimum 10 characters)."><%= review_text %></textarea>
      </div>

      <button type="submit" class="btn primary">Update Review
      </button>
    </form>
  </div>
</section>